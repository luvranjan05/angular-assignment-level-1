<h2>Users Table</h2>


<div class="search-container">
  <input 
    type="text" 
    [(ngModel)]="searchTerm" 
    (input)="filterUsers()"
    placeholder="Search by first or last name..."
    class="search-input"
  >
  <button 
    *ngIf="searchTerm" 
    (click)="clearSearch()" 
    class="clear-btn"
  >
    ×
  </button>
</div>

<div *ngIf="loading" class="loading">Loading...</div>

<table *ngIf="!loading && paginatedUsers.length > 0" class="users-table">
  <thead>
    <tr>
      <th (click)="onSort('first_name')" class="sortable">
        First Name {{getSortIcon('first_name')}}
      </th>
      <th (click)="onSort('last_name')" class="sortable">
        Last Name {{getSortIcon('last_name')}}
      </th>
      <th (click)="onSort('age')" class="sortable">
        Age {{getSortIcon('age')}}
      </th>
      <th (click)="onSort('email')" class="sortable">
        Email {{getSortIcon('email')}}
      </th>
      <th (click)="onSort('web')" class="sortable">
        Website {{getSortIcon('web')}}
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of paginatedUsers">
      <td>
        <a [routerLink]="['/users', user.id]" class="user-link">
          {{ user.first_name }}
        </a>
      </td>
      <td>{{ user.last_name }}</td>
      <td>{{ user.age }}</td>
      <td>{{ user.email }}</td>
      <td><a [href]="user.web" target="_blank">{{ user.web }}</a></td>
    </tr>
  </tbody>
</table>


<div *ngIf="!loading && filteredUsers.length === 0 && searchTerm" class="no-results">
  No users found matching "{{searchTerm}}"
  <button (click)="clearSearch()" class="show-all-btn">Show all users</button>
</div>


<div *ngIf="!loading && filteredUsers.length > 0 && totalPages > 1" class="pagination">
  <button 
    (click)="previousPage()" 
    [disabled]="isPreviousDisabled()"
    class="pagination-btn"
  >
    ← Previous
  </button>

  <div class="page-numbers">
    <button 
      *ngFor="let page of pages" 
      (click)="goToPage(page)"
      [class.active]="page === currentPage"
      class="page-btn"
    >
      {{ page }}
    </button>
  </div>

  <button 
    (click)="nextPage()" 
    [disabled]="isNextDisabled()"
    class="pagination-btn"
  >
    Next →
  </button>
</div>


<div *ngIf="!loading && filteredUsers.length > 0" class="page-info">
  Page {{currentPage}} of {{totalPages}} 
  (Showing {{getStartEntry()}} - {{getEndEntry()}} of {{filteredUsers.length}} entries)
</div>